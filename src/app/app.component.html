<div class="h-screen flex">
  <!-- Custom Navigation Sidebar -->
  <div
    class="border-r border-gray-200 transition-all duration-300 ease-in-out relative z-40"
    [ngClass]="{
      'w-0 overflow-hidden': !sidenavOpened()
    }"
    >
    <app-navigation></app-navigation>
  </div>

  <!-- Overlay for mobile -->
  @if (!isLargeScreen() && sidenavOpened()) {
    <div
      class="fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden"
      (click)="closeSidenav()"
    ></div>
  }

  <!-- Main Content Area -->
  <div class="flex flex-col flex-1 min-w-0">
    <!-- Top Toolbar -->
    <mat-toolbar
      class="sticky top-0 z-50 h-16 min-h-16 flex items-center px-4 md:px-6 bg-white border-b border-gray-200"
      >
      <!-- Left side search -->
      <div class="flex items-center flex-none mr-4 ml-6">
        <app-search></app-search>
      </div>

      <!-- Spacer to push user section to the right -->
      <div class="flex-1"></div>

      <!-- Right side user section -->
      <div class="flex items-center space-x-2 flex-none mr-6 ml-4">
        <!-- hide name on small screens -->
        <span class="hidden sm:block text-sm text-gray-700">{{ currentUser.name }}</span>
        <img [src]="currentUser.avatarUrl" alt="{{ currentUser.name }}" class="h-8 w-8 rounded-full" />
      </div>
    </mat-toolbar>

    <!-- Page Content -->
    <div class="flex-1 overflow-y-auto p-4 md:p-6 bg-gray-100 text-white">
      <router-outlet></router-outlet>
    </div>
  </div>
</div>
